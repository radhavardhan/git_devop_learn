create python app in ec2 and build docker image on top of it

Hereâ€™s a simple, production-style step-by-step guide to:

Launch an EC2 instance

Create a Python app on it

Build a Docker image

Run the container

Weâ€™ll assume youâ€™re using Amazon Linux 2 on Amazon EC2 inside Amazon Web Services.

ğŸš€ 1ï¸âƒ£ Launch EC2 Instance
Step 1: Create Instance

Go to AWS Console â†’ EC2

Click Launch Instance

Choose Amazon Linux 2

Instance type: t2.micro (free tier eligible)

Key pair: create or select existing

Security Group:

Allow SSH (22) from your IP

Allow HTTP (80) from Anywhere (0.0.0.0/0)

Launch the instance.

ğŸ” 2ï¸âƒ£ Connect to EC2

From your local machine:

ssh -i your-key.pem ec2-user@YOUR_PUBLIC_IP

ğŸ³ 3ï¸âƒ£ Install Docker on EC2

Run:

sudo yum update -y
sudo amazon-linux-extras install docker -y
sudo service docker start
sudo usermod -a -G docker ec2-user


Log out and SSH back in.

Verify:

docker --version

ğŸ 4ï¸âƒ£ Create a Simple Python App

Create a project folder:

mkdir myapp
cd myapp

Create app.py
nano app.py


Paste:

from flask import Flask

app = Flask(__name__)

@app.route("/")
def home():
    return "Hello from EC2 Docker!"

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)


Save(ctrl+s) and exit(ctrl+x).

Create requirements.txt
nano requirements.txt


Add:

flask

ğŸ³ 5ï¸âƒ£ Create Dockerfile
nano Dockerfile


Paste:

FROM python:3.10-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 5000

CMD ["python", "app.py"]


Save and exit.

ğŸ”¨ 6ï¸âƒ£ Build Docker Image
docker build -t my-python-app .


Check image:

docker images

â–¶ï¸ 7ï¸âƒ£ Run Container
docker run -d -p 80:5000 my-python-app


Now open in browser:

http://YOUR_PUBLIC_IP


You should see:

Hello from EC2 Docker!

ğŸ“¦ Optional: Push to Docker Hub
docker tag my-python-app yourdockerhubusername/my-python-app
docker push yourdockerhubusername/my-python-app

ğŸ§  Architecture Summary
EC2 Instance
 â”œâ”€â”€ Docker Installed
 â”œâ”€â”€ Python App
 â”œâ”€â”€ Docker Image
 â””â”€â”€ Running Container (Port 80 â†’ 5000)